import{W as e,R as t,V as i,S as s,P as o,A as n,l as r,e as a,a as h,b as c,c as d,d as l,M as g,I as u,f as m,g as v,h as p,i as x,j as f,C as w,B as y,k as z,D as b,m as P,n as S,L,o as C,p as F,q as M,T as E,r as _,s as I}from"./vendor.718d3f85.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var D="varying vec2 vertexUV;void main(){vertexUV=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1);}",V="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+10.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}float cnoise01(vec3 pos){return cnoise(pos)*0.5+0.5;}float pnoise01(vec3 pos,vec3 rep){return pnoise(pos,rep)*0.5+0.5;}";class k{constructor(e,t,i,s,o){this.game=e,this.position=t,this.rotation=i,this.scale=s,this.colorScheme=o,this.time=0}onLoaded(){const e=this.game.fileLoader.getImage("nebulas"),t=new c(.1*e.image.width*this.scale,.1*e.image.height*this.scale,1,1),i=new d({vertexShader:D,fragmentShader:V+"uniform sampler2D mainTex;uniform float time;uniform float channel;varying vec2 vertexUV;void main(){vec4 col=vec4(1.0);vec4 rawTex=texture2D(mainTex,vertexUV);float a=mix(rawTex.r,rawTex.g,channel>1.5);a*=a;vec2 uv=vertexUV*5.0;float noise2=cnoise01(vec3(uv*2.0,time*0.3+(1.0-a)*2.0));float noise3=cnoise01(vec3(uv*2.0,time*0.3+10.0+(1.0-a)*2.0));float noise4=cnoise01(vec3(uv*2.0,time*0.3+100.0+(1.0-a)*1.0));float noise5=cnoise01(vec3(uv*2.0,time*0.2+a*2.0));col.a=a*0.5+a*a*noise5;vec3 rgb1=vec3(noise2*0.2,noise3*0.1,noise4*0.8+0.2)*2.0;vec3 rgb2=vec3(noise4*0.8+0.2,noise2*0.2,noise3*0.3)*2.0;col.rgb=mix(rgb1,rgb2,float(channel>1.5));gl_FragColor=col;}",uniforms:{mainTex:{value:e},channel:{value:this.colorScheme},time:{value:0}},transparent:!0,blending:l});this.mesh=new g(t,i),this.mesh.position.copy(this.position),this.mesh.rotateZ(this.rotation),this.game.scene.add(this.mesh)}update(){this.time+=.02,this.time>100&&(this.time-=100),this.mesh&&(this.mesh.material.uniforms.time.value=this.time)}}class j{constructor(e,t,i,s,o,n,r){this.pA=e,this.t0=t,this.t1=i,this.pB=s,this.t2=o,this.t3=n,this.pC=r}}class T{constructor(e,t){let i=e;this.bezier01=new w(i.pA,i.t0,i.t1,i.pB),this.bezier02=new w(i.pB,i.t2,i.t3,i.pC),this.startPosition=i.pA,this.scene=t.scene,this.renderer=t.renderer,this.camera=t.camera}getPoint(e){return e<.5?this.bezier01.getPoint(2*e):this.bezier02.getPoint(2*(e-.5))}debug(){if(!this.debugInitialized){const e=.5;this.boxGeometry=new y(e,e,e),this.firstMaterial=new z({color:16777045}),this.pointMaterial=new z({color:16733525}),this.tangentPointMaterial=new z({color:5631573}),this.boxes=[],this.createDebugPoint("boxA",!1,this.bezier01.v0,!0),this.createDebugPoint("box0",!0,this.bezier01.v1),this.createDebugPoint("box1",!0,this.bezier01.v2),this.createDebugPoint("boxB",!1,this.bezier01.v3),this.createDebugPoint("box2",!0,this.bezier02.v1),this.createDebugPoint("box3",!0,this.bezier02.v2),this.createDebugPoint("boxC",!1,this.bezier02.v3),new b(this.boxes,this.camera,this.renderer.domElement),document.addEventListener("keydown",(e=>{if(67===e.keyCode){let e="";for(let t=0;t<this.boxes.length;t++){const i=this.boxes[t].position;e+=`new THREE.Vector3(${i.x.toFixed(3)}, ${i.y.toFixed(3)}, ${i.z.toFixed(3)})`,t!=this.boxes.length-1&&(e+=",\n")}P(e),this.notifier||(this.notifier=new S({durations:{global:1500}})),this.notifier.success("Bezier curve copied to clipboard!",{labels:{success:"Copied!"}})}})),this.debugInitialized=!0}this.bezier01.v0.copy(this.boxA.position),this.bezier01.v1.copy(this.box0.position),this.bezier01.v2.copy(this.box1.position),this.bezier01.v3.copy(this.boxB.position),this.bezier02.v0.copy(this.boxB.position),this.bezier02.v1.copy(this.box2.position),this.bezier02.v2.copy(this.box3.position),this.bezier02.v3.copy(this.boxC.position),this.drawSpline("spline01",this.bezier01),this.drawSpline("spline02",this.bezier02),this.drawLine("line01",this.bezier01.v0,this.bezier01.v1),this.drawLine("line02",this.bezier01.v2,this.bezier01.v3),this.drawLine("line03",this.bezier02.v0,this.bezier02.v1),this.drawLine("line04",this.bezier02.v2,this.bezier02.v3)}createDebugPoint(e,t,i,s){let o=t?this.tangentPointMaterial:this.pointMaterial;s&&(o=this.firstMaterial);const n=new g(this.boxGeometry,o);n.position.copy(i),this.scene.add(n),this[e]=n,this.boxes.push(n)}drawSpline(e,t){const i=new L({color:16711680}),s=t.getPoints(25),o=(new C).setFromPoints(s);this[e]&&this.scene.remove(this[e]),this[e]=new F(o,i),this.scene.add(this[e])}drawLine(e,t,i){const s=new L({color:52224,opacity:.4,blending:l}),o=[t,i],n=(new C).setFromPoints(o);this[e]&&this.scene.remove(this[e]),this[e]=new F(n,s),this.scene.add(this[e])}}class H{constructor(...e){e=e.sort(((e,t)=>e.x-t.x)),this.points=e,this.lines=[];for(let t=1;t<e.length;t++){let i=e[t-1],s=e[t],o=(s.y-i.y)/(s.x-i.x),n=i.y-o*i.x;this.lines.push({start:i.x,end:s.x,a:o,b:n})}}evaluate(e){let t=this.getLine(e);return t.a*e+t.b}getLine(e){for(let t=0;t<this.lines.length;t++){if(e<this.lines[t].start)return this.lines[t];if(e<this.lines[t].end)return this.lines[t]}return this.lines[this.lines.length-1]}}class O{constructor(e,t,s,o,n,r,a,h){this.game=e,this.manager=t,this.starScale=r,this.loopSoundMaxVolume=.7,this.dingSound=new f(e.listener),this.dingSound.hasPlaybackControl=!0,this.dingSound.setBuffer(o),this.dingSound.setVolume(.8),this.loopSound=new f(e.listener),this.loopSound.hasPlaybackControl=!0,this.loopSound.setBuffer(n),this.loopSound.setVolume(0),this.loopSound.setLoop(!0);const u=new z({color:2289407,transparent:!0}),m=new M(.75);this.curve=new T(h,e),this.star=new g(m,u),e.scene.add(this.star);const v=new d({vertexShader:D,fragmentShader:"uniform sampler2D mainTex;uniform float appear;varying vec2 vertexUV;void main(){vec4 col=texture2D(mainTex,vertexUV);col.a=col.r*step(col.g,appear);col.rgb=vec3(0.2,0.52,1.0);gl_FragColor=col;}",uniforms:{mainTex:{value:s},appear:{value:0}},transparent:!0,blending:l}),p=new c(.122*s.image.width,.122*s.image.height,1,1);this.text=new g(p,v),this.text.position.copy(a),e.scene.add(this.text),this.reset(),this.textOpacityCurve=new H(new i(0,0),new i(.4,.8),new i(.45,1),new i(.6,1),new i(.98,0)),this.starOpacityCurve=new H(new i(0,1),new i(.36,1),new i(.4,0),new i(.9,0),new i(.92,1)),this.starScaleCurve=new H(new i(0,2),new i(.25,1),new i(.4,.1),new i(.4,.1),new i(.9,.1),new i(.95,1.8),new i(1,1)),this.starPositionCurve=new H(new i(0,0),new i(.08,.15),new i(.35,.85),new i(.4,1),new i(.7,0)),this.star.onClick=e=>{this.isMoving||(this.game.canClick=!1,this.dingSound.isPlaying&&this.dingSound.stop(),this.dingSound.play(),this.manager.setCurrentStar(this),this.isMoving=!0,this.loopSound.play())},this.star.onHoverEnter=e=>{this.isCurrent()||this.star.scale.setLength(2)},this.star.onHoverExit=e=>{this.isCurrent()||this.star.scale.setLength(1)}}isCurrent(){return this.manager.currentStar==this}update(){if(this.isMoving)if(this.t+=.005,this.t<1){this.star.scale.setLength(this.starScaleCurve.evaluate(this.t)),this.star.material.opacity=this.starOpacityCurve.evaluate(this.t);let e=this.starPositionCurve.evaluate(this.t);e>1?e=1:e<0&&(e=0),this.star.position.copy(this.curve.getPoint(e)),this.text.material.uniforms.appear.value=this.textOpacityCurve.evaluate(this.t)}else this.reset(),this.game.canClick=!0;else!this.isCurrent()&&this.manager.currentStarIsMoving()?this.star.visible&&(this.star.visible=!1):this.star.visible||(this.star.visible=!0);let e=this.loopSound.getVolume();!this.isCurrent()&&this.loopSound.isPlaying?(e-=.02,e<=0&&(e=0,this.loopSound.stop()),this.loopSound.setVolume(e)):this.isCurrent()&&e<this.loopSoundMaxVolume&&(e+=.04,e>=this.loopSoundMaxVolume&&(e=this.loopSoundMaxVolume),this.loopSound.setVolume(e))}reset(){this.t=0,this.isMoving=!1,this.star.scale.setLength(this.starScale),this.star.material.opacity=1,this.star.position.copy(this.curve.startPosition),this.text.material.uniforms.appear.value=0}debug(){this.curve.debug(),this.text.material.uniforms.appear.value=1}}const A=new class{constructor(r,a){this.renderer=new e({canvas:document.querySelector(r),alpha:!0,antialias:!0}),this.raycaster=new t,this.mouse=new i,this.scene=new s,this.camera=new o(a,this.renderer.innerWidth/this.renderer.innerHeight,.1,2e3),this.canClick=!0,this.hoveredObjects=[],this.listener=new n,this.camera.add(this.listener),window.addEventListener("resize",this.setRendererSize.bind(this)),this.setRendererSize(),this.renderer.domElement.addEventListener("mousemove",(e=>{let t=!1;if(this.canClick){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);let i=this.raycaster.intersectObjects(this.scene.children).map((e=>e.object));i.forEach((i=>{i.onClick&&(t=!0),this.hoveredObjects.includes(i)||(i.onHoverEnter&&i.onHoverEnter(e),this.hoveredObjects.push(i)),i.onHover&&i.onHover(e)})),this.hoveredObjects.forEach((t=>{i.includes(t)||(this.hoveredObjects=this.hoveredObjects.filter((e=>e!=t)),t.onHoverExit&&t.onHoverExit(e))}))}this.setPointer(t)})),this.renderer.domElement.addEventListener("mousedown",(e=>{if(this.canClick){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);this.raycaster.intersectObjects(this.scene.children).forEach((t=>{t.object.onClick&&t.object.onClick(e)}))}}))}setFileLoader(e){this.fileLoader=e}setPointer(e){e?this.renderer.domElement.classList.add("pointer"):this.renderer.domElement.classList.remove("pointer")}render(){this.renderer.render(this.scene,this.camera)}setRendererSize(){this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)}}("#app",33),B=new class{constructor(e,t){this.onComplete=e,this.onProgress=t,this.imageLoader=new E,this.soundLoader=new _,this.images={},this.sounds={},this.toLoad=[],this.addImage("/assets/kyan.80c30a2d.png","kyan"),this.addImage("/assets/nebulas.b5886a88.jpg","nebulas"),this.addImage("/assets/civile.017b3f37.png","civile"),this.addImage("/assets/figuro.99231840.png","figuro"),this.addImage("/assets/luxus.56d09d41.png","luxus"),this.addImage("/assets/nec.a0ca2d78.png","nec"),this.addImage("/assets/pontus.0f8d37c5.png","pontus"),this.addImage("/assets/retino.91b9e2b8.png","retino"),this.addSound("/assets/space.2a7337e3.mp3","spaceBG"),this.addSound("/assets/civile-ding.83fc90b7.mp3","civileDing"),this.addSound("/assets/civile-loop.5ccbe343.mp3","civileLoop"),this.addSound("/assets/figuro-ding.b481a749.mp3","figuroDing"),this.addSound("/assets/figuro-loop.b03bd952.mp3","figuroLoop"),this.addSound("/assets/luxus-ding.22013b70.mp3","luxusDing"),this.addSound("/assets/luxus-loop.a29838dc.mp3","luxusLoop"),this.addSound("/assets/nec-ding.a5627b5e.mp3","necDing"),this.addSound("/assets/nec-loop.4c41a1e0.mp3","necLoop"),this.addSound("/assets/pontus-ding.7fea17fb.mp3","pontusDing"),this.addSound("/assets/pontus-loop.5ccf4fdf.mp3","pontusLoop"),this.addSound("/assets/retino-ding.623de480.mp3","retinoDing"),this.addSound("/assets/retino-loop.c170a1b4.mp3","retinoLoop"),this.loadAll()}getSound(e){return this.sounds[e]}getImage(e){return this.images[e]}addSound(e,t){this.toLoad.push({type:"sound",file:e,name:t})}addImage(e,t){this.toLoad.push({type:"image",file:e,name:t})}loadSound(e,t){this.soundLoader.load(e,(e=>{this.sounds[t]=e,this.onFileLoaded()}),(e=>this.onFileLoadProgress(e)))}loadImage(e,t){this.imageLoader.load(e,(e=>{this.images[t]=e,this.onFileLoaded()}),(e=>this.onFileLoadProgress(e)))}loadAll(){this.loadedFileCount=0,this.totalFileCount=this.toLoad.length,this.toLoad.forEach((e=>{"image"===e.type?this.loadImage(e.file,e.name):"sound"===e.type&&this.loadSound(e.file,e.name)}))}onFileLoadProgress(e){const t=e.loaded/e.total;this.onProgress(this.loadedFileCount/this.totalFileCount+1/this.totalFileCount*t)}onFileLoaded(){this.loadedFileCount++,this.onProgress&&this.onProgress(this.loadedFileCount/this.totalFileCount),this.loadedFileCount>=this.totalFileCount&&this.onComplete&&this.onComplete()}}((function(){q.onLoaded(),U.onLoaded(),R.onLoaded(),W.onLoaded(),Y.onLoaded(),I("#loading").addClass("fade"),setTimeout((()=>{I("#loading").hide()}),1500),G()}),(function(e){const t=100*e+"%";I("#loading .loading-bar .progress").css({width:t})}));A.setFileLoader(B);const X=new class{constructor(e,t){this.t=0,this.camera=e.camera,this.camera.position.setZ(200),this.camera.position.setY(-1),this.move=t,this.renderer=e.renderer,this.move&&(e.renderer.domElement.addEventListener("mousemove",(e=>this.moveCamera(e))),e.renderer.domElement.addEventListener("mouseenter",(e=>this.moveCamera(e))))}update(){this.t<1&&this.move&&(this.t+=.005,this.camera.position.setZ(r(400,200,a(this.t))))}moveCamera(e){const t=.08;let i=e.clientX/this.renderer.domElement.clientWidth,s=e.clientY/this.renderer.domElement.clientHeight;this.camera.position.setX(r(-15,15,1-i)),this.camera.position.setY(r(-7.5,7.5,s)-1),this.camera.rotation.setFromVector3(new h(r(.04,-.04,s),r(t,-.08,i),0))}}(A,!0),q=new class{constructor(e,t){this.game=e,this.time=0,this.count=t,this.geometry=new u,this.positions=new Float32Array(3*this.count),this.simplex=new m;for(let i=0;i<3*this.count;i++)this.positions[i]=1e3*(Math.random()-.5),(i-2)%3==0&&this.positions[i]>0&&(this.positions[i]+=1500);this.geometry.setAttribute("position",new v(this.positions,3)),this.material=new p({size:.5,color:8961023}),this.particles=new x(this.geometry,this.material),e.scene.add(this.particles),this.bgSFX=new f(e.listener)}onLoaded(){this.bgSFX.setBuffer(this.game.fileLoader.getSound("spaceBG")),this.bgSFX.hasPlaybackControl=!0,this.bgSFX.setLoop(!0),this.bgSFX.setVolume(1),this.bgSFX.play()}update(){this.time+=.1;for(let e=0;e<3*this.count;e++)this.positions[e]+=.005*this.simplex.noise2D(this.time,e);this.geometry.setAttribute("position",new v(this.positions,3))}}(A,2e3),U=new class{constructor(e){this.stars={},this.starsCount=1,this.loadedStars=0,this.fileLoader=e.fileLoader,this.game=e}onLoaded(){this.createStar("civile",new h(-8.64,25.558,0),new j(new h(42.205,3.032,-.957),new h(42.349,12.322,-1.693),new h(41.885,17.452,-1.935),new h(40.624,22.008,-1.42),new h(38.622,31.304,-1.27),new h(34.484,38.317,-1.501),new h(28.085,40.486,-1.27))),this.createStar("figuro",new h(-26.182,5.825,0),new j(new h(-41.911,-11.209,0),new h(-39.188,-5.316,0),new h(-33.087,-13.958,0),new h(-30.816,-16.776,0),new h(-28.585,-19.335,0),new h(-22.067,-26.452,0),new h(-15.548,-23.973,0))),this.createStar("luxus",new h(1.554,43.658,0),new j(new h(-3.16,-19.917,0),new h(-3.145,-14.262,0),new h(-3.114,-10.443,0),new h(-3.208,-3.674,0),new h(-3.268,.581,0),new h(-3.279,3.522,0),new h(-3.341,8.555,0))),this.createStar("nec",new h(48.079,-41.595,0),new j(new h(7.907,-41.643,0),new h(9.19,-49.604,0),new h(16.825,-47.765,0),new h(20.246,-42.594,0),new h(21.72,-39.681,0),new h(26.183,-34.312,0),new h(30.019,-32.601,0))),this.createStar("pontus",new h(.876,18.442,0),new j(new h(-32.55,6.644,0),new h(-32.67,8.936,0),new h(-29.509,10.903,0),new h(-25.384,8.405,0),new h(-22.249,6.908,0),new h(-19.575,.646,0),new h(-12.927,-1.031,0))),this.createStar("retino",new h(2.154,-19.314,0),new j(new h(-16.859,-28.205,0),new h(-13.114,-29.089,0),new h(-8.291,-30.126,0),new h(-1.994,-27.064,0),new h(6.254,-22.873,0),new h(9.503,-16.929,0),new h(5.862,-8.508,0)))}playMusic(e){this.playingMusic&&this.playingMusic.isPlaying&&this.playingMusic.stop(),this.playingMusic=e,this.playingMusic.play()}setCurrentStar(e){this.currentStar=e}currentStarIsMoving(){return this.currentStar&&this.currentStar.isMoving}createStar(e,t,i){this.stars[e]=new O(this.game,this,this.fileLoader.getImage(e),this.fileLoader.getSound(e+"Ding"),this.fileLoader.getSound(e+"Loop"),.45*Math.random()+.4,t,i)}update(){for(const[e,t]of Object.entries(this.stars))this.stars[e].update()}debug(){for(const[e,t]of Object.entries(this.stars))this.stars[e].debug()}}(A),R=new class{constructor(e){this.game=e,this.materials=[],this.meshes=[],this.time=0}onLoaded(){const e=new c(100,100,1,1),t=this.game.fileLoader.getImage("kyan"),i=new d({vertexShader:D,fragmentShader:V+"varying vec2 vertexUV;uniform sampler2D mainTex;uniform vec3 color;uniform float time;void main(){vec2 uv=vertexUV;float noise=cnoise01(vec3(uv.x*2.0,uv.y*100.0+time,time*0.5));noise*=noise;uv.y+=step(0.6,noise)*0.005*mix(0.1,1.0,step(0.6,fract(noise*10.0)));vec4 col=texture2D(mainTex,uv);col.a=col.r+col.r*step(0.40,noise)*0.1;col.rgb=color;gl_FragColor=col;}",uniforms:{mainTex:{value:t},color:{value:new h(.05,.3,1)},time:{value:0}},transparent:!0,blending:l,depthTest:!1});this.materials.push(i),this.materials.push(i.clone()),this.materials[1].uniforms.mainTex.value=t,this.materials[1].uniforms.color.value=new h(0,.25,.1),this.meshes.push(new g(e,this.materials[0]),new g(e,this.materials[1])),this.game.scene.add(this.meshes[0]),this.game.scene.add(this.meshes[1]),this.meshes[1].translateZ(-3)}update(){this.time+=.02,this.materials.forEach((e=>{e.uniforms.time.value=this.time}))}}(A),W=new k(A,new h(-550,-50,-1100),Math.PI,6,1),Y=new k(A,new h(300,0,-300),0,1.9,2);function G(){q.update(),U.update(),R.update(),W.update(),Y.update(),X.update(),A.render(),requestAnimationFrame(G)}
